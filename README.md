# ESP32 2D Minecraft

–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è 2D-–ø–µ—Å–æ—á–Ω–∏—Ü–∞ —Å –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –º–∏—Ä–∞, **—Ñ–∏–∑–∏–∫–æ–π —Å—ã–ø—É—á–∏—Ö –±–ª–æ–∫–æ–≤ (–∫–ª–µ—Ç–æ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç)** –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –¥–ª—è ESP32 –∏ –¥–∏—Å–ø–ª–µ—è ST7735 (1.8").

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* **–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –º–∏—Ä:** –ö–∞—Ä—Ç–∞ —Ä–∞–∑–º–µ—Ä–æ–º 128x128 –±–ª–æ–∫–æ–≤ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ä—É–¥ –ø–æ –≥–ª—É–±–∏–Ω–µ (–∫–∞–º–µ–Ω—å, —Ç—É—Ñ, 4 –≤–∏–¥–∞ —Ä—É–¥—ã).
* **–§–∏–∑–∏–∫–∞ —Å—ã–ø—É—á–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –º–µ—Ö–∞–Ω–∏–∫–∞ "Falling Sand" (–∫–∞–∫ –≤ Noita –∏–ª–∏ Terraria). –ü–µ—Å–æ–∫ –∏ –∂–∏–¥–∫–æ—Å—Ç–∏ –º–æ–≥—É—Ç –æ—Å—ã–ø–∞—Ç—å—Å—è –≤–Ω–∏–∑ –∏ —Å–∫–∞—Ç—ã–≤–∞—Ç—å—Å—è –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏, –æ–±—Ä–∞–∑—É—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –≥–æ—Ä–∫–∏.
* **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫:**
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞** (`screenBuffer`) –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ä—Ü–∞–Ω–∏—è. –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ –±–ª–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å –ø—Ä–æ—à–ª–æ–≥–æ –∫–∞–¥—Ä–∞.
* –°–∏—Å—Ç–µ–º–∞ "–∞–∫—Ç–∏–≤–Ω—ã—Ö –±–ª–æ–∫–æ–≤" –¥–ª—è –ø—Ä–æ—Å—á–µ—Ç–∞ —Ñ–∏–∑–∏–∫–∏ —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–≤–∏–∂–µ–Ω–∏–µ.


* **–ë–µ—Å—à–æ–≤–Ω—ã–π –º–∏—Ä:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ç–æ—Ä–æ–∏–¥–∞–ª—å–Ω–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ (–º–∏—Ä –∑–∞—Ü–∏–∫–ª–µ–Ω —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ).
* **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≥–ª—É–±–∏–Ω—ã (Depth Bar).
* –ó–∞–≥–æ—Ç–æ–≤–∫–∏ –ø–æ–¥ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (Start / Generate Type).


* **–†–∞–∑—Ä—É—à–∞–µ–º–æ—Å—Ç—å:** –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π, –¥–æ–±—ã—á–∞ –±–ª–æ–∫–æ–≤ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–µ—Å—Ç–Ω–∏—Ü.

## üõ† –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ

* **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:** ESP32
* **–î–∏—Å–ø–ª–µ–π:** ST7735 160x128 (SPI)
* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ê–Ω–∞–ª–æ–≥–æ–≤—ã–π –¥–∂–æ–π—Å—Ç–∏–∫ (–æ—Å–∏ X –∏ Y) + –∫–Ω–æ–ø–∫–∏

### –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (ST7735)

| –ü–∏–Ω –¥–∏—Å–ø–ª–µ—è | –ü–∏–Ω ESP32 | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- |
| **VCC** | 3.3V | –ü–∏—Ç–∞–Ω–∏–µ |
| **GND** | GND | –ó–µ–º–ª—è |
| **CS** | GPIO 5 | –í—ã–±–æ—Ä —á–∏–ø–∞ |
| **RESET** | GPIO 4 | –°–±—Ä–æ—Å |
| **D/C** | GPIO 2 | –î–∞–Ω–Ω—ã–µ / –ö–æ–º–∞–Ω–¥—ã |
| **MOSI** | GPIO 23 | SPI Data |
| **SCK** | GPIO 18 | SPI Clock |

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

* **Joystick X:** GPIO 34
* **Joystick Y:** GPIO 35
* **–ö–Ω–æ–ø–∫–∏:** GPIO 33, 32, 25

## üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ –∏ –Ω–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª–æ–∫–∞ –∏ –§–ª–∞–≥–∏

–ú–∏—Ä —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–µ —Å—Ç—Ä—É–∫—Ç—É—Ä `Block`. –°–∏—Å—Ç–µ–º–∞ —Ñ–ª–∞–≥–æ–≤ –±—ã–ª–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ñ–∏–∑–∏–∫–∏ –∂–∏–¥–∫–æ—Å—Ç–µ–π/–ø–µ—Å–∫–∞.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Ñ–ª–∞–≥–æ–≤ (uint8_t flags):**

* `0-–π –±–∏—Ç` **(BROKEN):** –ë–ª–æ–∫ —Å–ª–æ–º–∞–Ω (–ø—É—Å—Ç–æ—Ç–∞).
* 
`1-–π –±–∏—Ç` **(MOVABLE):** –ë–ª–æ–∫ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω —Ñ–∏–∑–∏–∫–µ —Å—ã–ø—É—á–µ—Å—Ç–∏ (–∂–∏–¥–∫–æ—Å—Ç—å/–ø–µ—Å–æ–∫).


* `2-–π –±–∏—Ç` **(RENDERED):** –§–ª–∞–≥ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ (—Å–ª—É–∂–µ–±–Ω—ã–π).
* `3-–π –±–∏—Ç` **(UNBREAKABLE):** –ù–µ–ª—å–∑—è —Å–ª–æ–º–∞—Ç—å (–±–µ–¥—Ä–æ–∫).
* `4-–π –±–∏—Ç` **(NO_COLLISION):** –ù–µ—Ç –∫–æ–ª–ª–∏–∑–∏–∏ (–∑–∞–¥–Ω–∏–π —Ñ–æ–Ω, –ª–µ—Å—Ç–Ω–∏—Ü–∞).
* `5-–π –±–∏—Ç` **(ADD_BUFFER):** –ë–ª–æ–∫ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±—É—Ñ–µ—Ä –ø—Ä–æ—Å—á–µ—Ç–∞ —Ñ–∏–∑–∏–∫–∏ (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è).

### 2. –°–∏—Å—Ç–µ–º–∞ –∂–∏–¥–∫–æ—Å—Ç–µ–π –∏ —Å—ã–ø—É—á–∏—Ö –±–ª–æ–∫–æ–≤ (`liquidTick`)

–í–≤–µ–¥–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞, –Ω–∞–ø–æ–º–∏–Ω–∞—é—â–∞—è –∫–ª–µ—Ç–æ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç.

* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `liquidBuffer` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö (–¥–≤–∏–∂—É—â–∏—Ö—Å—è) –±–ª–æ–∫–æ–≤.
* –ë–ª–æ–∫–∏ —Å —Ñ–ª–∞–≥–æ–º `MOVABLE` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Å–æ–∫) –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è –≤–Ω–∏–∑.
* –ï—Å–ª–∏ –Ω–∏–∑ –∑–∞–Ω—è—Ç, –±–ª–æ–∫ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–∫–∞—Ç–∏—Ç—å—Å—è –≤–ª–µ–≤–æ –∏–ª–∏ –≤–ø—Ä–∞–≤–æ –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏.


* –ö–æ–≥–¥–∞ –±–ª–æ–∫ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –æ–Ω —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –±—É—Ñ–µ—Ä–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ CPU.

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (`render`)

–í–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ —ç–∫—Ä–∞–Ω–∞ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä, –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞—Å—Å–∏–≤ `screenBuffer[9][8]`.

* –î–≤–∏–∂–æ–∫ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç ID –±–ª–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å, —Å —Ç–µ–º, —á—Ç–æ —É–∂–µ –µ—Å—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω–µ.
* –ö–æ–º–∞–Ω–¥–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –¥–∏—Å–ø–ª–µ—é (`tft.fillRect` –∏–ª–∏ `drawBitmp`) –ø–æ–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç FPS –∏ —É–±–∏—Ä–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏.


## üïπ –ö–∞–∫ –∏–≥—Ä–∞—Ç—å

1. **–î–≤–∏–∂–µ–Ω–∏–µ:** –î–∂–æ–π—Å—Ç–∏–∫ –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ. –ú–∏—Ä –±–µ—Å–∫–æ–Ω–µ—á–µ–Ω –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏.
2. **–ö–æ–ø–∞–Ω–∏–µ:** –ù–∞–ø—Ä–∞–≤—å—Ç–µ –¥–∂–æ–π—Å—Ç–∏–∫ –≤ —Å—Ç–æ—Ä–æ–Ω—É –±–ª–æ–∫–∞. –ï—Å–ª–∏ –æ–Ω —Ä–∞–∑—Ä—É—à–∞–µ–º, –æ–Ω –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—Å—è –≤ —Ñ–æ–Ω.
3. **–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ:** (–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏) –ü—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –≤–≤–µ—Ä—Ö —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ª–µ—Å—Ç–Ω–∏—Ü—ã, –µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ—Å—É—Ä—Å—ã (–ª–æ–≥–∏–∫–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏).
4. **–§–∏–∑–∏–∫–∞:** –ï—Å–ª–∏ –≤—ã–∫–æ–ø–∞—Ç—å –±–ª–æ–∫ –ø–æ–¥ –ø–µ—Å–∫–æ–º, –ø–µ—Å–æ–∫ —É–ø–∞–¥–µ—Ç. –û—Å—Ç–æ—Ä–æ–∂–Ω–æ, –≤–∞—Å –º–æ–∂–µ—Ç –∑–∞—Å—ã–ø–∞—Ç—å!

## üõ† –ë—É–¥—É—â–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏

* **–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–µ—Ç:** –ü–æ–ª—É—á–µ–Ω–∏–µ –º–æ–Ω–µ—Ç –∑–∞ –¥–æ–±—ã—á—É —Ä—É–¥
* **–°—Ç—Ä—É–∫—Ç—É—Ä—ã:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—â–µ—Ä, –≥–æ—Ä –∏ —Ç–¥.
* **–ú–æ–±—ã:** –ü—Ä–æ—Å—Ç—ã–µ –ò–ò –∂–∏–≤–æ—Ç–Ω—ã–µ —Å —Å–ª—É—á–∞–π–Ω—ã–º–∏ –¥–≤–∏–∂–µ–Ω–∏—è–º–∏
* **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã:** –° –ø–æ–º–æ—â—å—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ –º–∏—Ä–∞ –≤ –ø–∞–º—è—Ç–∏ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –º–∏—Ä –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ø—Ä–∞–π—Ç—ã
